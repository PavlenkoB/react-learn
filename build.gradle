plugins {
    //front
    id("com.github.node-gradle.node") version "2.2.2"
}

// Frontend

node {
    download = true
    version = "22.9.0"
    npmVersion = "10.8.3"
    // Set the work directory for unpacking node
    workDir = file("${project.buildDir}/nodejs")
    // Set the work directory for NPM
    npmWorkDir = file("${project.buildDir}/npm")
}

tasks.register("appNpmInstall", NpmTask) {
    description = "Installs all dependencies from package.json"
    workingDir = file("${project.projectDir}")
    args = ["install"]
}

tasks.register("appNpmBuild", NpmTask) {
    dependsOn("appNpmInstall")
    description = "Builds project"
    workingDir = file("${project.projectDir}")
    args = ["run", "build"]
}
